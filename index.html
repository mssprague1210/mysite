<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Matthew Sprague – Home</title>
  <meta name="description" content="Digital platforms strategist focused on human-centered design and outdoor-inspired simplicity." />
  <meta name="theme-color" content="#234F2E" />
  <meta name="color-scheme" content="light dark" />
  <link rel="icon" type="image/png" href="/favicon.png" />
  <link rel="apple-touch-icon" href="/apple-touch-icon.png" />
  <link rel="stylesheet" href="/assets/site.css?v=13" />

  <!-- Perf: optional if you remove @import in CSS later -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;500;700&family=Figtree:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
  <!-- Skip link for keyboard/screen-reader users -->
  <a class="skip-link" href="#main">Skip to content</a>
  <nav class="top-nav" aria-label="Primary">
    <div class="container">
      <a class="brand" href="/">
        <img src="/favicon.png" alt="M.S. favicon" />
        <span class="name">Matthew Sprague</span>
      </a>

      <div class="menu">
        <a aria-current="page" class="active" href="/">Home</a>
        <a href="/resume/">Resume</a>
        <a href="/hobbies/">Hobbies</a>
        <a href="/trips/">Trips</a>
        <a href="/story/">DND Campaign</a>
      </div>

      <button
        class="hamburger"
        aria-label="Menu"
        aria-controls="mobile-panel"
        aria-expanded="false">
        <span class="bars" aria-hidden="true"></span>
      </button>
    </div>
  </nav>

  <!-- Mobile nav is its own landmark and outside the sticky nav -->
  <nav id="mobile-panel" class="mobile-panel" aria-label="Mobile navigation">
    <a href="/">Home</a>
    <a href="/resume/">Resume</a>
    <a href="/hobbies/">Hobbies</a>
    <a href="/trips/">Trips</a>
    <a href="/story/">DND Campaign</a>
  </nav>

  <main id="main">
    <!-- New Personal Intro Section -->
    <header id="home" class="personal-intro container">
        <div class="intro-text">
            <div class="eyebrow">Product Marketing • Go-To-Market Strategy</div>
            <h1>Hi, I’m Matthew.</h1>
            <p>I’m a digital marketing leader with a passion for building data-driven strategies that connect with users. With a background in leading high-impact experimentation and personalization at Verizon, I specialize in transforming business goals into simple, human-centered digital experiences.</p>
            <p>Below is a small tech demo I built to showcase this approach. Give it a try!</p>
        </div>
        <div class="intro-photo">
            <!-- Your photo -->
            <img src="/assets/images/matt.webp" alt="A photo of Matthew Sprague">
        </div>
    </header>

    <!-- Weather Widget Section -->
    <section id="gear-forecast" class="container">
        <!-- Initial prompt, visible by default -->
        <div id="widget-prompt" class="widget-prompt">
            <h2>Gear Forecaster</h2>
            <p>Check the weather where you are to get recommendations on great gear!</p>
            <button id="forecast-button" class="button">Gear Forecast</button>
        </div>

        <!-- Weather card, hidden by default -->
        <div id="widget-card" class="widget-card" style="display: none;">
            <div id="weather-forecast-display" class="weather-forecast-display">
                <div id="weather-icon"></div>
                <div id="weather-details" class="weather-details">
                    <p id="weather-location">Fetching your location...</p>
                    <p id="weather-temp-desc"></p>
                    <p id="weather-timestamp"></p>
                </div>
            </div>
            <p id="recommendation-text">Finding the right gear for you...</p>
            <div id="recommendation-products" class="recommendation-products">
                <!-- Product items will be injected here by JS -->
            </div>
        </div>
    </section>

    <!-- "About This Feature" Section -->
    <section class="about-feature container">
        <h2>About This Feature</h2>
        <p>This "Gear Forecaster" is a proof-of-concept for personalized e-commerce. It uses the OpenWeatherMap API via a secure serverless function to fetch a visitor's local weather. Based on the conditions, it dynamically suggests relevant product categories, demonstrating a practical way to increase user engagement and conversion.</p>
        <p>It was designed as a fun example of how I approach digital strategy: blending data, user context, and business goals to create a valuable experience. If you like what you see, I'd love to discuss it further. Together, we can explore web and user engagement strategies for e-commerce.</p>
        <div class="cta-row">
          <a class="button" href="/resume/">View My Resume</a>
        </div>
    </section>

  </main>

  <footer class="container">
    <p>© <span id="year"></span> Matthew Sprague. Forest green & gold. Hosted on Cloudflare; Netlify deploys.</p>
  </footer>

  <script>
    // --- Standard Page Scripts ---
    document.getElementById('year').textContent = new Date().getFullYear();

    const btn = document.querySelector('.hamburger');
    const panel = document.getElementById('mobile-panel');
    const focusableElements = panel ? panel.querySelectorAll('a') : [];
    const firstLink = focusableElements[0];
    const lastLink = focusableElements[focusableElements.length - 1];

    function openMenu() {
      btn.setAttribute('aria-expanded', 'true');
      document.body.classList.add('mobile-open');
      panel.addEventListener('keydown', trapFocus);
      firstLink && firstLink.focus();
    }
    function closeMenu() {
      btn.setAttribute('aria-expanded', 'false');
      document.body.classList.remove('mobile-open');
      panel.removeEventListener('keydown', trapFocus);
      btn.focus();
    }
    function trapFocus(e) {
      if (e.key === 'Tab') {
        if (e.shiftKey && document.activeElement === firstLink) {
          e.preventDefault();
          lastLink.focus();
        } else if (!e.shiftKey && document.activeElement === lastLink) {
          e.preventDefault();
          firstLink.focus();
        }
      }
    }
    if (btn && panel) {
      btn.addEventListener('click', () => {
        const open = btn.getAttribute('aria-expanded') === 'true';
        open ? closeMenu() : openMenu();
      });
      panel.addEventListener('click', (e) => {
        if (e.target.tagName === 'A') closeMenu();
      });
      document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape' && btn.getAttribute('aria-expanded') === 'true') {
          closeMenu();
        }
      });
    }

    // --- Weather Widget Script ---
    const forecastButton = document.getElementById('forecast-button');
    const widgetPrompt = document.getElementById('widget-prompt');
    const widgetCard = document.getElementById('widget-card');

    const weatherWidget = () => {
        const weatherIconEl = document.getElementById('weather-icon');
        const locationEl = document.getElementById('weather-location');
        const tempDescEl = document.getElementById('weather-temp-desc');
        const timestampEl = document.getElementById('weather-timestamp');
        const recommendationTextEl = document.getElementById('recommendation-text');
        const recommendationProductsEl = document.getElementById('recommendation-products');

        const recommendations = {
            hot: { text: "Wow! It's hot out there. If you're running or cycling today, staying hydrated is key.", products: [ { name: "Hydration Vests", link: "https://www.camelbak.com/shop/", image: "2654001000.webp" }, { name: "Water Bottles", link: "https://www.hydroflask.com/shop/travel-tumbler", image: "hydroflask.webp" }, { name: "Electrolytes", link: "https://dripdrop.com/collections/all", image: "dripdrop.webp" } ]},
            rain: { text: "Sometimes training comes with the risk of rain. Always prioritize safety and be prepared with a rain jacket or a dry bag.", products: [ { name: "Men's Rain Jackets", link: "https://www.outdoorresearch.com/collections/mens-rain-jackets", image: "rainjacket.webp" }, { name: "Women's Rain Jackets", link: "https://www.outdoorresearch.com/collections/womens-rain-jackets", image: "womensrainjacket.webp" }, { name: "Dry Bags", link: "https://www.rei.com/c/dry-bags", image: "drybag.webp" } ]},
            cold: { text: "It's chilly! Layering up is the best way to stay warm on your adventures.", products: [ { name: "Men's Base Layers", link: "https://www.rei.com/c/mens-base-layer-tops", image: "base-layer-men.webp" }, { name: "Women's Base Layers", link: "https://www.rei.com/c/womens-base-layer-tops", image: "base-layer-women.webp" }, { name: "Warm Hats", link: "https://www.rei.com/c/winter-hats", image: "winter-hat.webp" } ]},
            snow: { text: "Looks like snow! Perfect weather for some warm, waterproof boots to keep your feet happy.", products: [ { name: "Men's Winter Boots", link: "https://www.danner.com/styles/boots?sortId=position-asc&gender%5B%5D=5338&stock_status%5B%5D=1&stock_status%5B%5D=0", image: "winter-boots-men.webp" }, { name: "Women's Winter Boots", link: "https://www.danner.com/women/hike?sortId=position-asc&stock_status%5B%5D=1&stock_status%5B%5D=0", image: "winter-boots-women.webp" }, { name: "Gaiters", link: "https://www.rei.com/c/leg-gaiters", image: "gaiters.webp" } ]},
            clear: { text: "It's a beautiful clear day! Perfect for getting outside. Protect your eyes with a quality pair of sunglasses.", products: [ { name: "Men's Sunglasses", link: "https://www.mauijim.com/US/en_US/shop/sunglasses/men", image: "mauijimmen.webp" }, { name: "Women's Sunglasses", link: "https://www.mauijim.com/US/en_US/shop/sunglasses/women", image: "mauijimwomen.webp" }, { name: "Sunscreen", link: "https://www.sunbum.com/products/daily-50-body-lotion", image: "sunbum.webp" } ]},
            mild: { text: "It looks like ideal camping, running, or biking weather! Check out these great deals.", products: [ { name: "Running Shoes", link: "https://www.saucony.com/en/running/", image: "running-shoes.webp" }, { name: "Tents", link: "https://www.coleman.com/camp-sports/tents-by-size/", image: "tent.webp" }, { name: "Day Packs", link: "https://www.osprey.com/backpacks-bags/day-packs", image: "day-pack.webp" } ]},
            overcast: { text: "It's not raining yet, but now is the perfect time to prepare.", products: [ { name: "Men's Rain Jackets", link: "https://www.outdoorresearch.com/collections/mens-rain-jackets", image: "rainjacket.webp" }, { name: "Women's Rain Jackets", link: "https://www.outdoorresearch.com/collections/womens-rain-jackets", image: "womensrainjacket.webp" }, {  name: "Dry Bags", link: "https://www.rei.com/c/dry-bags", image: "drybag.webp" } ]},
            misty: { text: "It's a little wet out there, but hopefully it clears up soon. Stay safe and dry with these great picks.", products: [ { name: "Men's Rain Jackets", link: "https://www.outdoorresearch.com/collections/mens-rain-jackets", image: "rainjacket.webp" }, { name: "Women's Rain Jackets", link: "https://www.outdoorresearch.com/collections/womens-rain-jackets", image: "womensrainjacket.webp" }, {  name: "Dry Bags", link: "https://www.rei.com/c/dry-bags", image: "drybag.webp" } ]},
            default: { text: "Whatever the weather, having the right gear makes every adventure better. Explore and get inspired to try something new.", products: [ { name: "Mountaineering Gear", link: "https://www.rei.com/c/mountaineering-gear", image: "new-arrivals.webp" }, { name: "Swimming Gear", link: "https://www.arenasport.com/en_us/", image: "new-arrivals-women.webp" }, { name: "The Smartest Watches", link: "https://www.garmin.com/", image: "garmin.webp" } ]}
        };

        const getWeatherData = async (lat, lon) => {
            try {
                const response = await fetch(`/.netlify/functions/weather?lat=${lat}&lon=${lon}`);
                if (!response.ok) throw new Error('Weather data not available.');
                const data = await response.json();
                updateWidget(data);
            } catch (error) {
                locationEl.textContent = 'Could not fetch weather.';
                console.error(error);
            }
        };

        const updateWidget = (data) => {
            const temp = Math.round(data.main.temp);
            const description = data.weather[0].description;
            const iconCode = data.weather[0].icon;
            const weatherId = data.weather[0].id; // The numeric ID for the weather condition
            const timestamp = new Date(data.dt * 1000);
            const hour = timestamp.getHours();
            const formattedTime = timestamp.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });

            if (hour >= 6 && hour < 18) {
                weatherIconEl.classList.add('is-day');
                weatherIconEl.classList.remove('is-night');
            } else {
                weatherIconEl.classList.add('is-night');
                weatherIconEl.classList.remove('is-day');
            }

            locationEl.textContent = `Your forecast in ${data.name}`;
            tempDescEl.textContent = `${temp}°F, ${description}`;
            timestampEl.textContent = `Updated at ${formattedTime}`;
            weatherIconEl.innerHTML = `<img src="https://openweathermap.org/img/wn/${iconCode}@2x.png" alt="${description}">`;

            let recommendation;
            if (temp >= 80) recommendation = recommendations.hot;
            else if (temp <= 49) recommendation = recommendations.cold;
            else if (weatherId >= 200 && weatherId < 600) recommendation = recommendations.rain; // Rain, Drizzle, Thunderstorm
            else if (weatherId >= 600 && weatherId < 700) recommendation = recommendations.snow; // Snow
            else if (weatherId === 804) recommendation = recommendations.overcast; // Overcast clouds
            else if (weatherId >= 701 && weatherId <= 781) recommendation = recommendations.misty; // Mist, Haze, Fog, etc.
            else if (temp >= 50 && temp <= 79) recommendation = recommendations.mild; // Catches clear, few/scattered clouds in this temp range
            else recommendation = recommendations.default; // Fallback for any other case
            
            recommendationTextEl.textContent = recommendation.text;
            
            recommendationProductsEl.innerHTML = recommendation.products.map(product => `
                <div class="product-item">
                    <img src="/gearforecast/${product.image}" alt="${product.name}" width="120" height="120">
                    <a href="${product.link}" class="button" target="_blank" rel="noopener noreferrer">${product.name}</a>
                </div>
            `).join('');
        };

        const getLocation = () => {
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(
                    (position) => { getWeatherData(position.coords.latitude, position.coords.longitude); },
                    (error) => {
                        locationEl.textContent = 'Location access denied.';
                        recommendationTextEl.textContent = 'Please enable location services to get a gear forecast.';
                        console.error(error);
                    }
                );
            } else {
                locationEl.textContent = 'Geolocation is not supported.';
                recommendationTextEl.textContent = 'Sorry, your browser does not support the features needed for a forecast.';
            }
        };

        getLocation();
    };

    forecastButton.addEventListener('click', () => {
        widgetPrompt.style.display = 'none';
        widgetCard.style.display = 'flex';
        weatherWidget();
    });

  </script>
</body>
</html>
